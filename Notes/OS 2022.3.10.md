# OS 2022.3.10

## 一、启动

​		该如何启动？软硬件需要相互控制，先启动谁？这是一个先有鸡还是先有蛋的问题。为了解决这个问题，我们将硬盘等设备的状态在启动前总是至于一个最通用、简单的状态(因此此状态也是功能最弱的状态)；继而我们可以通过逐步设置提升硬件环境的能力，逐步提升系统的灵活性。

### 1.启动第一步：加载BIOS

​		BIOS设置程序是一段被固化到电脑主板上ROM的一组程序。主要功能是为电脑提供最底层和最直接的硬件设置与控制。BIOS通常和硬件系统集成在一起，故而也被称为固件。

​		BIOS程序存放的存储器不会丢失内容，系统重制的时候，第一条指令会被定位到BOIS的存储器。在X86中，BOIS的固定物理地址为0xFFFF0。

​		BIOS程序可以进行硬件自检，用以保障如键盘、磁盘设备等重要硬件正常运行；否则则会终止启动。另外，BIOS还可以读取启动顺序，即让用户选择由哪些设备引导启动。

#### Tips:磁盘

​		磁盘是具有存储功能的硬件，其有多个层次。每个磁盘有两面，每面有一个磁头。

​		**磁道：**盘片上以盘片中心为圆心，不同的半径为同心圆。

​		**扇区：**盘片被分割成许多扇形区域，每一个区域称为扇区。

​		**柱面：**硬盘中，不同盘片相同半径的磁道组成的圆柱。

​		由于IT行业发展的较快，BIOS为作出适应新硬件所需要做的变化成本太高，于是诞生了UEFI(统一可扩展固件接口)。

### 2.启动第二步：读取MBR

​		MBR为第0磁头的第0磁道的第一个扇区，我们称之为主引导记录。这是一个特殊的扇区，虽然只有512字节大小，但它加载了预启动信息、分区表信息。

#### MBR的结构

​		MBR的前446个字节存放了启动代码以及数据；之后的447-510字节存放了分区表。分区表共有64个字节，由四个分区项组成，每个分区项为16个字节。最后两个字节被称为"魔数"，用于判断硬盘是否已分区。

​		加载BIOS并且读取好MBR后，系统的初始设置就完成了，接下来要做的就是对系统进行逐级引导，释放其灵活性。

### 3.启动第三步：Boot Loader

​		Boot Loader是操作系统内核运行之前的一段小程序，其可初始化硬件设备、建立内存空间示意图。我们通常也将它称为操作系统内核加载其，其通常严重依赖硬件实现。

​		GRUB和LILO为最重要的Linux加载器。

#### LILO

​		LILO时左右Linux发行版本的标准组成部分，是最老的Linux引导加载程序。它可以快速启动安装在MBR中的Linux操作系统。



​		